# CI/CD Troubleshooting Guide

## üö® –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ–ª–æ–º–æ–∫ CI:

1. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ GitHub Actions**
   - ‚ùå `actions/setup-python@v4` 
   - ‚úÖ `actions/setup-python@v5`

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   - ‚ùå `flake8` (—É—Å—Ç–∞—Ä–µ–ª)
   - ‚úÖ `ruff` (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∏–Ω—Ç–µ—Ä)

3. **–ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Python**
   - ‚ùå –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö workflow
   - ‚úÖ –¢–æ–ª—å–∫–æ Python 3.12 –≤–µ–∑–¥–µ

4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤**
   - ‚ùå `pip install -e app/api[dev]` –±–µ–∑ `cd`
   - ‚úÖ `cd app/api && pip install -e .[dev]`

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º PR –∑–∞–ø—É—Å–∫–∞–π –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–¥
cd /workspaces/mirai-agent
ruff check app/ --output-format=github
black --check app/
mypy app/ --ignore-missing-imports --no-strict-optional

# 2. –ò—Å–ø—Ä–∞–≤—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
ruff check app/ --fix
black app/

# 3. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã
pytest -q
cd app/api && pytest -v tests/
cd ../trader && pytest -v tests/
```

### –ï—Å–ª–∏ CI –≤—Å–µ —Ä–∞–≤–Ω–æ –ª–æ–º–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ GitHub Actions** - —Ç–∞–º –±—É–¥–µ—Ç —Ç–æ—á–Ω–∞—è –æ—à–∏–±–∫–∞
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   git pull origin main
   pip install -r requirements.txt --upgrade
   ```
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∏–º–µ–Ω–Ω–æ —Ç–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ CI**

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è Copilot Agent

–ö–æ–≥–¥–∞ Copilot Agent —Å–æ–∑–¥–∞–µ—Ç PR, –ø—Ä–æ–≤–µ—Ä—å:

- [ ] –í—Å–µ CI workflows –∏—Å–ø–æ–ª—å–∑—É—é—Ç Python 3.12
- [ ] –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ requirements.txt
- [ ] –ù–æ–≤—ã–π –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç `ruff check` –∏ `black --check`
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã deprecated –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```bash
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black app/
ruff check app/ --fix

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ 
pip install -r requirements.txt --upgrade

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest && cd app/api && pytest && cd ../trader && pytest
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π CI –¥–æ–ª–∂–µ–Ω:
- ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç—å –≤—Å–µ 3 workflow (main CI, CI API, CI Trader)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (ruff, black, mypy)
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ Python 3.12
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è - –∑–∞–ø—É—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è" –∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç.
