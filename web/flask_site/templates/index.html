{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-container">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <span class="wave">üëã</span>
                    –ü—Ä–∏–≤–µ—Ç! –Ø <strong>Mirai</strong>
                    <span class="jp-text">(Ë™âÊòé)</span>
                </h1>
                <p class="hero-subtitle">{{ data.subtitle }}</p>
                <p class="hero-description">{{ data.description }}</p>

                <div class="hero-actions">
                    <a href="{{ url_for('capabilities') }}" class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        –ò–∑—É—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
                    </a>
                    <a href="https://aimirai.online" class="btn btn-secondary" target="_blank">
                        <i class="fas fa-chart-line"></i>
                        –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
                    </a>
                </div>

                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value">{{ data.stats.trading_accuracy }}</span>
                        <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤–ª–∏</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">{{ data.stats.uptime }}</span>
                        <span class="stat-label">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">{{ data.stats.processed_trades }}</span>
                        <span class="stat-label">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–¥–µ–ª–æ–∫</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">{{ data.stats.ai_confidence }}</span>
                        <span class="stat-label">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ò–ò</span>
                    </div>
                </div>
            </div>

            <div class="hero-visual">
                <div class="ai-avatar">
                    <div class="avatar-circle">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="pulse-rings">
                        <div class="ring ring-1"></div>
                        <div class="ring ring-2"></div>
                        <div class="ring ring-3"></div>
                    </div>
                </div>

                <div class="live-stats">
                    <div class="live-stat">
                        <span class="live-indicator"></span>
                        <span>AI –∞–∫—Ç–∏–≤–µ–Ω</span>
                    </div>
                    <div class="live-stat">
                        <span class="live-indicator green"></span>
                        <span>–¢–æ—Ä–≥–æ–≤–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç</span>
                    </div>
                    <div class="live-stat">
                        <span class="live-indicator blue"></span>
                        <span>–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä—ã–Ω–æ–∫</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="scroll-indicator">
            <span>–ü—Ä–æ–∫—Ä—É—Ç–∏ –≤–Ω–∏–∑</span>
            <i class="fas fa-chevron-down"></i>
        </div>
    </div>
</section>

<!-- Capabilities Preview -->
<section class="capabilities-preview">
    <div class="container">
        <h2 class="section-title">–ß—Ç–æ —è —É–º–µ—é</h2>
        <div class="capabilities-grid">
            {% for capability in data.capabilities %}
            <div class="capability-card">
                <div class="capability-icon">{{ capability.title.split()[0] }}</div>
                <h3>{{ capability.title.split(' ', 1)[1] }}</h3>
                <p>{{ capability.description }}</p>
                <ul class="feature-list">
                    {% for feature in capability.features[:2] %}
                    <li><i class="fas fa-check"></i> {{ feature }}</li>
                    {% endfor %}
                </ul>
                <div class="capability-footer">
                    <a href="{{ url_for('capabilities') }}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Portfolio Preview -->
<section class="portfolio-preview">
    <div class="container">
        <h2 class="section-title">–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2>
        <div class="portfolio-grid">
            {% for project in data.portfolio[:2] %}
            <div class="portfolio-card">
                <div class="portfolio-header">
                    <h3>{{ project.title }}</h3>
                    <span class="status status-{{ project.status.lower() }}">{{ project.status }}</span>
                </div>
                <p>{{ project.description }}</p>
                <div class="tech-stack">
                    {% for tech in project.tech[:3] %}
                    <span class="tech-tag">{{ tech }}</span>
                    {% endfor %}
                </div>
                {% if project.url %}
                <a href="{{ project.url }}" class="portfolio-link" target="_blank">
                    –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç <i class="fas fa-external-link-alt"></i>
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <div class="portfolio-cta">
            <a href="{{ url_for('portfolio') }}" class="btn btn-outline">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<!-- Live Trading Data -->
<section class="live-data">
    <div class="container">
        <h2 class="section-title">–¢–æ—Ä–≥–æ–≤–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
        <div class="trading-dashboard">
            <div class="trading-widget">
                <h3><i class="fas fa-chart-line"></i> –î–Ω–µ–≤–Ω–∞—è –ø—Ä–∏–±—ã–ª—å</h3>
                <div class="metric-value" id="dailyPnl">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="metric-change" id="pnlChange">+0.0%</div>
            </div>

            <div class="trading-widget">
                <h3><i class="fas fa-percentage"></i> –í–∏–Ω—Ä–µ–π—Ç</h3>
                <div class="metric-value" id="winRate">{{ data.stats.trading_accuracy }}</div>
                <div class="metric-label">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–¥–µ–ª–æ–∫</div>
            </div>

            <div class="trading-widget">
                <h3><i class="fas fa-shield-alt"></i> –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞</h3>
                <div class="metric-value" id="riskLevel">–°—Ä–µ–¥–Ω–∏–π</div>
                <div class="metric-label">3/6 –¥–Ω–µ–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫</div>
            </div>

            <div class="trading-widget">
                <h3><i class="fas fa-brain"></i> –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ò–ò</h3>
                <div class="metric-value" id="aiConfidence">{{ data.stats.ai_confidence }}</div>
                <div class="metric-label">–¢–µ–∫—É—â–∏–π –∞–Ω–∞–ª–∏–∑</div>
            </div>
        </div>

        <div class="trading-cta">
            <a href="https://aimirai.online" class="btn btn-trading" target="_blank">
                <i class="fas fa-external-link-alt"></i>
                –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é –ø–∞–Ω–µ–ª—å
            </a>
        </div>
    </div>
</section>

<!-- Contact CTA -->
<section class="contact-cta">
    <div class="container">
        <div class="cta-content">
            <h2>–ì–æ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ?</h2>
            <p>–°–≤—è–∂–∏—Å—å —Å–æ –º–Ω–æ–π –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ–± –ò–ò</p>
            <div class="cta-actions">
                <a href="{{ url_for('contact') }}" class="btn btn-primary">
                    <i class="fas fa-envelope"></i>
                    –°–≤—è–∑–∞—Ç—å—Å—è
                </a>
                <button class="btn btn-voice" id="heroVoiceBtn">
                    <i class="fas fa-microphone"></i>
                    –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å –≥–æ–ª–æ—Å–æ–º
                </button>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Live trading data updates
    async function updateTradingData() {
        try {
            const response = await fetch('https://aimirai.online/api/trading/status');
            const data = await response.json();

            // Update metrics if elements exist
            const dailyPnl = document.getElementById('dailyPnl');
            const winRate = document.getElementById('winRate');
            const riskLevel = document.getElementById('riskLevel');
            const aiConfidence = document.getElementById('aiConfidence');

            if (dailyPnl && data.daily_pnl) {
                dailyPnl.textContent = `$${data.daily_pnl.toFixed(2)}`;
            }

            if (winRate && data.win_rate) {
                winRate.textContent = `${data.win_rate}%`;
            }

            if (riskLevel && data.risk_level) {
                riskLevel.textContent = data.risk_level.charAt(0).toUpperCase() + data.risk_level.slice(1);
            }

            if (aiConfidence && data.ai_confidence) {
                aiConfidence.textContent = `${Math.round(data.ai_confidence * 100)}%`;
            }

        } catch (error) {
            console.log('Trading API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', error);
        }
    }

    // Update data every 30 seconds
    updateTradingData();
    setInterval(updateTradingData, 30000);

    // Hero voice button
    document.getElementById('heroVoiceBtn')?.addEventListener('click', function () {
        const voiceBtn = document.getElementById('voiceBtn');
        if (voiceBtn) {
            voiceBtn.click();
        }
    });
</script>
{% endblock %}