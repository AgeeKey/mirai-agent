<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirai AI Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .status-card {
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .status-card:hover {
            transform: translateY(-2px);
        }
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .component-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .status-active { background-color: #28a745; }
        .status-warning { background-color: #ffc107; }
        .status-error { background-color: #dc3545; }
        
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .refresh-btn {
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading {
            display: none;
        }
        
        .loading.active {
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="mb-0">
                        <i class="fas fa-brain me-3"></i>
                        Mirai AI Dashboard
                    </h1>
                    <p class="mb-0">Система искусственного интеллекта</p>
                </div>
                <div class="col-auto">
                    <button class="btn btn-light" onclick="refreshData()">
                        <i class="fas fa-sync-alt me-2" id="refresh-icon"></i>
                        Обновить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Статус системы -->
        <div class="row mb-4">
            <div class="col-md-3 mb-3">
                <div class="card status-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-robot fa-2x text-primary mb-3"></i>
                        <h5>Статус ИИ</h5>
                        <div class="component-status justify-content-center">
                            <div class="status-indicator status-active"></div>
                            <span id="ai-status">Активен</span>
                        </div>
                        <small class="text-muted d-block mt-2">
                            Время работы: <span id="uptime">0ч 0м</span>
                        </small>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="card status-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-lightbulb fa-2x text-warning mb-3"></i>
                        <h5>Решения</h5>
                        <div class="metric-value text-primary" id="decisions-count">45</div>
                        <small class="text-muted">Принято решений</small>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="card status-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line fa-2x text-success mb-3"></i>
                        <h5>Прогнозы</h5>
                        <div class="metric-value text-primary" id="predictions-count">128</div>
                        <small class="text-muted">Создано прогнозов</small>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="card status-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-database fa-2x text-info mb-3"></i>
                        <h5>Знания</h5>
                        <div class="metric-value text-primary" id="knowledge-count">23</div>
                        <small class="text-muted">Новых записей</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Навигация по вкладкам -->
        <div class="row mb-4">
            <div class="col-12">
                <nav>
                    <div class="nav nav-pills nav-fill" id="nav-tab" role="tablist">
                        <button class="nav-link active" id="nav-performance-tab" data-bs-toggle="tab" data-bs-target="#nav-performance" type="button" role="tab">
                            <i class="fas fa-tachometer-alt me-2"></i>Производительность
                        </button>
                        <button class="nav-link" id="nav-decisions-tab" data-bs-toggle="tab" data-bs-target="#nav-decisions" type="button" role="tab">
                            <i class="fas fa-brain me-2"></i>Решения
                        </button>
                        <button class="nav-link" id="nav-knowledge-tab" data-bs-toggle="tab" data-bs-target="#nav-knowledge" type="button" role="tab">
                            <i class="fas fa-book me-2"></i>База знаний
                        </button>
                        <button class="nav-link" id="nav-components-tab" data-bs-toggle="tab" data-bs-target="#nav-components" type="button" role="tab">
                            <i class="fas fa-cogs me-2"></i>Компоненты
                        </button>
                    </div>
                </nav>
            </div>
        </div>

        <!-- Содержимое вкладок -->
        <div class="tab-content" id="nav-tabContent">
            <!-- Производительность -->
            <div class="tab-pane fade show active" id="nav-performance" role="tabpanel">
                <div class="row">
                    <div class="col-md-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Метрики производительности</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="performanceChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="mb-0">Оптимизация</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="autoOptimization" checked>
                                    <label class="form-check-label" for="autoOptimization">
                                        Автооптимизация
                                    </label>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Использование кеша</small>
                                        <small id="cache-percent">78%</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 78%" id="cache-progress"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <small>Эффективность памяти</small>
                                        <small>85%</small>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 85%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Решения -->
            <div class="tab-pane fade" id="nav-decisions" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">История решений ИИ</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>Действие</th>
                                        <th>Уверенность</th>
                                        <th>Время</th>
                                        <th>Статус</th>
                                        <th>Результат</th>
                                    </tr>
                                </thead>
                                <tbody id="decisions-table">
                                    <!-- Данные загружаются динамически -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- База знаний -->
            <div class="tab-pane fade" id="nav-knowledge" role="tabpanel">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Распределение знаний</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="knowledgeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="mb-0">Статистика</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-4">
                                    <div class="metric-value text-primary" id="total-knowledge">1,247</div>
                                    <div class="text-muted">Всего записей</div>
                                </div>
                                <div class="text-center mb-4">
                                    <div class="metric-value text-success">+15</div>
                                    <div class="text-muted">Новых за сегодня</div>
                                </div>
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    База знаний активно пополняется новой информацией и автоматически категоризируется
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Компоненты -->
            <div class="tab-pane fade" id="nav-components" role="tabpanel">
                <div class="row" id="components-grid">
                    <!-- Компоненты загружаются динамически -->
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">Конфигурация системы</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="autoDecisions" checked>
                                    <label class="form-check-label" for="autoDecisions">
                                        Автоматическое принятие решений
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="machineLearning" checked>
                                    <label class="form-check-label" for="machineLearning">
                                        Машинное обучение
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="knowledgeAccumulation" checked>
                                    <label class="form-check-label" for="knowledgeAccumulation">
                                        Накопление знаний
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="performanceOptimization" checked>
                                    <label class="form-check-label" for="performanceOptimization">
                                        Оптимизация производительности
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Инициализация графиков
        let performanceChart, knowledgeChart;
        
        // Данные для графика производительности
        const performanceData = {
            labels: ['10:00', '10:05', '10:10', '10:15', '10:20', '10:25'],
            datasets: [
                {
                    label: 'CPU %',
                    data: [25, 30, 28, 35, 32, 29],
                    borderColor: 'rgb(75, 192, 192)',
                    backgroundColor: 'rgba(75, 192, 192, 0.1)',
                    tension: 0.1
                },
                {
                    label: 'Память %',
                    data: [45, 48, 52, 55, 51, 49],
                    borderColor: 'rgb(255, 99, 132)',
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    tension: 0.1
                },
                {
                    label: 'Решения/мин',
                    data: [5, 8, 6, 12, 9, 7],
                    borderColor: 'rgb(255, 205, 86)',
                    backgroundColor: 'rgba(255, 205, 86, 0.1)',
                    tension: 0.1
                }
            ]
        };

        // Данные для диаграммы знаний
        const knowledgeData = {
            labels: ['AI/ML', 'Trading', 'System', 'Analytics', 'Security', 'Other'],
            datasets: [{
                data: [324, 289, 198, 156, 98, 182],
                backgroundColor: [
                    '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'
                ],
                borderWidth: 2,
                borderColor: '#fff'
            }]
        };

        // Инициализация графиков при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            loadDecisions();
            loadComponents();
            updateData();
            
            // Автообновление каждые 30 секунд
            setInterval(updateData, 30000);
        });

        function initCharts() {
            // График производительности
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(performanceCtx, {
                type: 'line',
                data: performanceData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });

            // Диаграмма знаний
            const knowledgeCtx = document.getElementById('knowledgeChart').getContext('2d');
            knowledgeChart = new Chart(knowledgeCtx, {
                type: 'doughnut',
                data: knowledgeData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }

        function loadDecisions() {
            const decisions = [
                {
                    action: 'optimize_memory_usage',
                    confidence: 0.87,
                    timestamp: '2025-01-20 10:25:30',
                    status: 'executed',
                    outcome: 'successful'
                },
                {
                    action: 'restart_failed_services',
                    confidence: 0.95,
                    timestamp: '2025-01-20 10:20:15',
                    status: 'executed',
                    outcome: 'successful'
                },
                {
                    action: 'analyze_market_trends',
                    confidence: 0.73,
                    timestamp: '2025-01-20 10:15:45',
                    status: 'in_progress',
                    outcome: 'pending'
                }
            ];

            const tableBody = document.getElementById('decisions-table');
            tableBody.innerHTML = '';

            decisions.forEach(decision => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${decision.action}</td>
                    <td>
                        <div class="progress" style="width: 80px; height: 20px;">
                            <div class="progress-bar" role="progressbar" style="width: ${decision.confidence * 100}%"></div>
                        </div>
                        <small>${Math.round(decision.confidence * 100)}%</small>
                    </td>
                    <td>${decision.timestamp}</td>
                    <td><span class="badge bg-${getStatusColor(decision.status)}">${decision.status}</span></td>
                    <td><span class="badge bg-${getStatusColor(decision.outcome)}">${decision.outcome}</span></td>
                `;
                tableBody.appendChild(row);
            });
        }

        function loadComponents() {
            const components = [
                { name: 'AI Engine', status: 'active' },
                { name: 'Algorithms', status: 'active' },
                { name: 'Knowledge Base', status: 'active' },
                { name: 'Optimizer', status: 'active' }
            ];

            const grid = document.getElementById('components-grid');
            grid.innerHTML = '';

            components.forEach(component => {
                const col = document.createElement('div');
                col.className = 'col-md-3 mb-3';
                col.innerHTML = `
                    <div class="card status-card">
                        <div class="card-body text-center">
                            <h6>${component.name}</h6>
                            <div class="component-status justify-content-center">
                                <div class="status-indicator status-${component.status}"></div>
                                <span class="text-capitalize">${component.status}</span>
                            </div>
                            <small class="text-muted d-block mt-2">
                                ${component.status === 'active' ? 'Работает нормально' : 'Требует внимания'}
                            </small>
                        </div>
                    </div>
                `;
                grid.appendChild(col);
            });
        }

        function getStatusColor(status) {
            switch (status) {
                case 'active':
                case 'executed':
                case 'successful':
                    return 'success';
                case 'warning':
                case 'in_progress':
                case 'pending':
                    return 'warning';
                case 'error':
                case 'failed':
                    return 'danger';
                default:
                    return 'secondary';
            }
        }

        function updateData() {
            // Обновление метрик
            const uptime = Math.floor(Math.random() * 7200) + 3600; // 1-3 часа
            const hours = Math.floor(uptime / 3600);
            const minutes = Math.floor((uptime % 3600) / 60);
            document.getElementById('uptime').textContent = `${hours}ч ${minutes}м`;

            document.getElementById('decisions-count').textContent = Math.floor(Math.random() * 50) + 30;
            document.getElementById('predictions-count').textContent = Math.floor(Math.random() * 100) + 100;
            document.getElementById('knowledge-count').textContent = Math.floor(Math.random() * 30) + 10;

            // Обновление прогресса кеша
            const cachePercent = Math.floor(Math.random() * 20) + 70;
            document.getElementById('cache-percent').textContent = `${cachePercent}%`;
            document.getElementById('cache-progress').style.width = `${cachePercent}%`;
        }

        function refreshData() {
            const refreshIcon = document.getElementById('refresh-icon');
            refreshIcon.classList.add('refresh-btn');
            
            setTimeout(() => {
                refreshIcon.classList.remove('refresh-btn');
                updateData();
                loadDecisions();
                loadComponents();
            }, 1000);
        }

        // Обработчики событий для переключателей
        document.getElementById('autoOptimization').addEventListener('change', function() {
            console.log('Автооптимизация:', this.checked);
        });

        document.getElementById('autoDecisions').addEventListener('change', function() {
            console.log('Автоматические решения:', this.checked);
        });

        document.getElementById('machineLearning').addEventListener('change', function() {
            console.log('Машинное обучение:', this.checked);
        });

        document.getElementById('knowledgeAccumulation').addEventListener('change', function() {
            console.log('Накопление знаний:', this.checked);
        });

        document.getElementById('performanceOptimization').addEventListener('change', function() {
            console.log('Оптимизация производительности:', this.checked);
        });
    </script>
</body>
</html>